<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Doação via Pix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="font-family: Arial; max-width: 400px; margin: 40px auto; text-align: center;">

  <h2>Faça sua doação ❤️</h2>

  <input 
    type="number" 
    id="valor" 
    placeholder="Valor em R$" 
    style="width: 100%; padding: 10px; font-size: 16px;"
  >

  <br><br>

  <button 
    onclick="gerarPix()" 
    style="width: 100%; padding: 12px; font-size: 16px; cursor: pointer;"
  >
    Gerar Pix
  </button>

  <br><br>

  <div id="resultado"></div>

  <script>
    async function gerarPix() {
      const valor = document.getElementById("valor").value;

      if (!valor || valor <= 0) {
        alert("Digite um valor válido");
        return;
      }

      const valorCentavos = Math.round(valor * 100);
      document.getElementById("resultado").innerHTML = "Gerando Pix...";

      try {
        const response = await fetch("https://api.silenpay.com.br/v1/transactions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer pk_5SXF1yhJ20Ds0ZkbwNurwvSw58064JiVEBp4N0ZvtjYxfaIc"
          },
          body: JSON.stringify({
            amount: valorCentavos,
            payment_method: "pix"
          })
        });

        const data = await response.json();

        document.getElementById("resultado").innerHTML = `
          <img src="${data.pix.qr_code}" width="250"><br><br>
          <textarea rows="4" style="width:100%" readonly>
${data.pix.copy_paste}
          </textarea>
        `;
      } catch (e) {
        document.getElementById("resultado").innerHTML = "Erro ao gerar Pix";
      }
    }
  </script>

</body>
</html>
